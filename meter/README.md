# Monitoring-Service

## Swagger
http://localhost:8080/swagger-ui/index.html
http://localhost:8080/v3/api-docs

### Описание
Показания можно подавать один раз в месяц.
Ранее поданые показания редактировать запрещено.
Последние поданые показания считаются актуальными.
Пользователь может видеть только свои показания, администратор может видеть показания всех пользователей.
Создайте реализацию, которая соответствует описанным ниже требованиям и ограничениям.

## Task 1: Introduction
Разработайте веб-сервис для подачи показаний счетчиков отопления, горячей и холодной воды

### Требования
- предусмотреть расширение перечня подаваемых показаний
- данные хранятся в памяти приложения
- приложение должно быть консольным (никаих спрингов, взаимодействий с БД и тд, только java-core и collections)
- регистрация пользователя
- авторизация пользователя
- реализовать эндпоинт для получения актуальных показаний счетчиков
- реализовать эндпоинт подачи показаний
- реализовать эндпоинт просмотра показаний за конкретный месяц
- реализовать эндпоинт просмотра истории подачи показаний
- реализовать контроль прав пользователя
- Аудит действий пользователя (авторизация, завершение работы, подача показаний, получение истории подачи показаний и тд)

### Нефункциональные требования
Unit-тестирование

## Task 2: JDBC и Миграции
Необходимо обновить сервис, который вы разработали в первом задании согласно следующим требованиям и ограничениям

### Требования:
- Репозитории теперь должны писать ВСЕ сущности в БД PostgreSQL
- Идентификаторы при сохранении в БД должны выдаваться через sequence
- DDL-скрипты на создание таблиц и скрипты на предзаполнение таблиц должны выполняться только инструментом миграции Liquibase
- Скрипты миграции Luiqbase должны быть написаны в нотации XML или YAML
- Скриптов миграции должно быть несколько. Как минимум один на создание всех таблиц, другой - на предзаполнение данными
- Служебные таблицы должны быть в отдельной схеме
- Таблицы сущностей хранить в схеме public запрещено
- В тестах необходимо использовать test-containers
- В приложении должен быть docker-compose.yml, в котором должны быть прописаны инструкции для развертывания postgre в докере. Логин, пароль и база должны быть отличными от тех, что прописаны в образе по-умолчанию. Приложение должно работать с БД, развернутой в докере с указанными параметрами.
- Приложение должно поддерживать конфиг-файлы. Всё, что относится к подключению БД, а также к миграциям, должно быть сконфигурировано через конфиг-файл.

## Task 3: Servlet API и AOP
Необходимо обновить сервис, который вы разработали в первом задании согласно следующим требованиям и ограничениям

### Требования:
- Все взаимодействие должно теперь осуществляться через отправку HTTP запросов
- Сервлеты должны принимать JSON и отдавать также JSON
- Для сериализации и десереализации использовать jackson
- Использовать понятное именование эндпоинтов
- Возвращать разные статус-коды
- Добавить  DTO (если ранее не было заложено в логике)
- Для маппинга сущностей в дто использовать MapStruct
- Реализовать валидацию входящих ДТО
- Аудит переделать на аспекты через аннотацию
- Также реализовать на аспектах логирование выполнения любого метода (с замером времени выполнения)
- Сервлеты должны быть покрыты тестами

## Task 4: Знакомство с Spring Framework
Необходимо обновить сервис согласно следующим требованиям и ограничениям.

### Требования:
- Java-конфигурация приложения
- Кастомные конфигурационные файлы заменить на application.yml
- Удалить сервлеты, реализовать Rest-контроллеры (Spring MVC)
- Swagger + Swagger UI
- Аспекты переписать на Spring AOP
- Внедрение зависимостей ТОЛЬКО через конструктор
- Удалить всю логику создания сервисов, репозиториев и тд. Приложение должно полностью управляться спрингом
- Добавить тесты на контроллеры (WebMVC)\

## Task 5: Spring boot
Необходимо обновить сервис, который вы разработали в первом задании согласно следующим требованиям и ограничениям

### Требования
- Spring Boot 3.2.0 с использованием необходимых стартеров
- Обновить тесты
- Аспекты аудита и логирования вынести в стартер, сделать отдельным модулем. Один стартер должен автоматически подключаться, второй через аннотацию @EnableXXX
- Swagger -> SpringDoc